#include <stdint.h>

#include <c11threads.h>

#include "world.h"


struct block {
    int_fast32_t type_id;
};

/*
        This is a top layer of 16x16 blocks of a chunk section, a chunk contains 256 layers of these.
        They are indexed bottom to top. 0 to 15. The layer displayed here is the top one, the 1st.
        (Would be 0 if starting index at 0 instead of 1)

                                            North

        +----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+
        | 0  | 1  | 2  | 3  | 4  | 5  | 6  | 7  | 8  | 9  | 10 | 11 | 12 | 13 | 14 | 15 |
        +----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+
        | 16 | 17 | 18 | 19 | 20 | 21 | 22 | 23 | 24 | 25 | 26 | 27 | 28 | 29 | 30 | 31 |
        +----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+
        | 32 | 33 | 34 | 35 | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | And so on..
        +----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+
        | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  |
        +----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+
        | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  |
        +----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+
        | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  |
        +----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+
        | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  |
        +----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+
        | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  |
  West  +----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+   East
        | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  |
        +----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+
        | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  |
        +----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+
        | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  |
        +----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+
        | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  |
        +----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+
        | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  |
        +----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+
        | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  |
        +----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+
        | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  |
        +----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+
        | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  | 0  |
        +----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+

                                            South

West to east, north to south block changing is the fastest (as they are index in that direction), so from top to bottom, left to right:

 -------------------------------------->
 -------------------------------------->
 -------------------------------------->
 -------------------------------------->
 -------------------------------------->
 -------------------------------------->
 -------------------------------------->
 -------------------------------------->
 -------------------------------------->
 -------------------------------------->


*/


struct chunk_section {
    mtx_t lock;

    struct block blocks[4096]; // 16x16x16
};

struct chunk {
    struct chunk_section sections[16]; // 16 high indexed bottom to top.
};

struct world {

};